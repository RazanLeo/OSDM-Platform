# ๐ ุงููุฑุญูุฉ ุงูุซุงููุฉ: ุจูุงุก ุงูุฃูุธูุฉ ุงูุญููููุฉ - OSDM Platform

---

## โ ูุง ุชู ุฅูุฌุงุฒู ูู ุงููุฑุญูุฉ ุงูุฃููู:

1. โ **ุชูุณูุน Schema ุจุฌููุน ุงูุชุตูููุงุช** - ุชู ุฅุถุงูุฉ 596+ ููุน
   - ุฌุฏูู A: 312 ููุน ูู ุงูููุชุฌุงุช ุงูุฌุงูุฒุฉ (8 ูุฆุงุช ุฑุฆูุณูุฉ)
   - ุฌุฏูู B: 234 ููุน ูู ุงูุฎุฏูุงุช ุงููุฎุตุตุฉ (8 ูุฆุงุช ุฑุฆูุณูุฉ)
   - ุฌุฏูู C: 50+ ูุฆุฉ ูู ูุดุงุฑูุน ุงูุนูู ุงูุญุฑ

2. โ **ุงูุชูุซูู ุงููุงูู** - ุชู ุฅูุดุงุก:
   - `CATEGORIES_COMPLETE.md` - ูุงุฆูุฉ ุดุงููุฉ ุจุฌููุน ุงูุชุตูููุงุช
   - `IMPLEMENTATION_PLAN.md` - ุฎุฑูุทุฉ ุทุฑูู ุงูุชุทููุฑ ุงููุงููุฉ

3. โ **ุฑูุน ุงูุชุญุฏูุซุงุช** - ุชู ุฑูุน ูู ุดูุก ุนูู GitHub
   - Commit: 174e590 - "feat: Add complete comprehensive categories (596+ types)"

---

## ๐ฏ ุงููุฑุญูุฉ ุงูุซุงููุฉ: ุจูุงุก ุงูุฃูุธูุฉ ุงููุธูููุฉ ุงูุญููููุฉ

### ูุธุฑุฉ ุนุงูุฉ:
ุงูุขู ุจุนุฏ ุฃู ุฃุตุจุญุช ูุงุนุฏุฉ ุงูุจูุงูุงุช ุฌุงูุฒุฉ ุจุฌููุน ุงูุชุตูููุงุชุ ูุจุฏุฃ ุจุจูุงุก ุงูุฃูุธูุฉ ุงููุธูููุฉ ุงูุชู ุณุชุฌุนู ุงูููุตุฉ ุชุนูู ุจุดูู ุญูููู ููุนุงู.

---

## ๐ ุฎุทุฉ ุงูุชูููุฐ (ุญุณุจ ุงูุฃููููุฉ):

### ุงููุฌููุนุฉ ุงูุฃููู: ุงูุฃูุธูุฉ ุงูุฃุณุงุณูุฉ ุงูุนุงุฌูุฉ

#### 1. ูุธุงู ุงููุตุงุฏูุฉ ุงููุงูู (Authentication System) - ุฃุนูู ุฃููููุฉ

**ุงููุฏู:** ุจูุงุก ูุธุงู ุชุณุฌูู ุฏุฎูู ูุงูู ูุน 3 ุฃููุงุน ูู ุงูุญุณุงุจุงุช

**ุงูููููุงุช ุงููุทููุจุฉ:**

**ุฃ. ูููุฐุฌ ุงููุณุชุฎุฏู ุงููุญุฏุซ:**
```prisma
model User {
  id            String    @id @default(cuid())
  username      String    @unique
  email         String    @unique
  password      String    // hashed
  role          UserRole  @default(BUYER)

  // Profile
  fullName      String?
  avatar        String?
  phone         String?
  location      String?
  bio           String?

  // Settings
  language      Language  @default(AR)
  emailVerified Boolean   @default(false)
  phoneVerified Boolean   @default(false)

  // Timestamps
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt
  lastLoginAt   DateTime?

  // Relations
  products      Product[]
  services      Service[]
  jobs          FreelanceJob[]
  purchases     Order[]
  reviews       Review[]
  messages      Message[]
  notifications Notification[]
}

enum UserRole {
  ADMIN        // ุงููุฏูุฑ (Razan@OSDM)
  SELLER       // ุงูุจุงุฆุน (ูุจูุน ููุชุฌุงุช/ุฎุฏูุงุช/ูุดุงุฑูุน)
  BUYER        // ุงููุดุชุฑู (ูุดุชุฑู ููุท)
}

enum Language {
  AR           // ุงูุนุฑุจูุฉ
  EN           // ุงูุฅูุฌููุฒูุฉ
}
```

**ุจ. ุตูุญุงุช ุงูุชุณุฌูู:**
- `/app/[locale]/auth/login/page.tsx` - ุชุณุฌูู ุงูุฏุฎูู
- `/app/[locale]/auth/register/page.tsx` - ุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏ
- `/app/[locale]/auth/forgot-password/page.tsx` - ูุณูุช ูููุฉ ุงููุฑูุฑ
- `/app/[locale]/auth/reset-password/page.tsx` - ุฅุนุงุฏุฉ ุชุนููู ูููุฉ ุงููุฑูุฑ

**ุฌ. NextAuth Configuration:**
```typescript
// app/api/auth/[...nextauth]/route.ts
import NextAuth from "next-auth"
import CredentialsProvider from "next-auth/providers/credentials"
import { PrismaAdapter } from "@auth/prisma-adapter"
import { prisma } from "@/lib/prisma"
import bcrypt from "bcryptjs"

export const authOptions = {
  adapter: PrismaAdapter(prisma),
  providers: [
    CredentialsProvider({
      name: "credentials",
      credentials: {
        username: { label: "Username", type: "text" },
        password: { label: "Password", type: "password" }
      },
      async authorize(credentials) {
        if (!credentials?.username || !credentials?.password) {
          throw new Error("Invalid credentials")
        }

        const user = await prisma.user.findUnique({
          where: { username: credentials.username }
        })

        if (!user || !user.password) {
          throw new Error("Invalid credentials")
        }

        const isCorrectPassword = await bcrypt.compare(
          credentials.password,
          user.password
        )

        if (!isCorrectPassword) {
          throw new Error("Invalid credentials")
        }

        // Update last login
        await prisma.user.update({
          where: { id: user.id },
          data: { lastLoginAt: new Date() }
        })

        return user
      }
    })
  ],
  session: {
    strategy: "jwt"
  },
  pages: {
    signIn: "/ar/auth/login",
    error: "/ar/auth/error"
  },
  callbacks: {
    async jwt({ token, user }) {
      if (user) {
        token.id = user.id
        token.role = user.role
        token.username = user.username
      }
      return token
    },
    async session({ session, token }) {
      if (token) {
        session.user.id = token.id
        session.user.role = token.role
        session.user.username = token.username
      }
      return session
    }
  }
}
```

**ุฏ. ุญุณุงุจ ุงููุฏูุฑ ุงูุงูุชุฑุงุถู:**
```typescript
// prisma/seed.ts - ุฅุถุงูุฉ ุญุณุงุจ ุงููุฏูุฑ
import { PrismaClient } from '@prisma/client'
import bcrypt from 'bcryptjs'

const prisma = new PrismaClient()

async function main() {
  // Create Admin Account
  const hashedPassword = await bcrypt.hash('RazanOSDM@056300', 10)

  const admin = await prisma.user.upsert({
    where: { username: 'Razan@OSDM' },
    update: {},
    create: {
      username: 'Razan@OSDM',
      email: 'app.osdm@gmail.com',
      password: hashedPassword,
      role: 'ADMIN',
      fullName: 'ุฑุฒุงู ุชูููู',
      emailVerified: true,
      phoneVerified: true,
      language: 'AR'
    }
  })

  console.log('โ Admin account created:', admin)
}

main()
  .catch((e) => {
    console.error(e)
    process.exit(1)
  })
  .finally(async () => {
    await prisma.$disconnect()
  })
```

**ุงููููุงุช ุงููุทููุจุฉ:**
- `lib/auth.ts` - ูุณุงุนุฏุงุช ุงููุตุงุฏูุฉ
- `middleware.ts` - ุญูุงูุฉ ุงูุตูุญุงุช
- `components/auth/LoginForm.tsx` - ูููุฐุฌ ุชุณุฌูู ุงูุฏุฎูู
- `components/auth/RegisterForm.tsx` - ูููุฐุฌ ุงูุชุณุฌูู

---

#### 2. ููุญุฉ ุชุญูู ุงูุฅุฏุงุฑุฉ (Admin Dashboard)

**ุงููุฏู:** ููุญุฉ ุชุญูู ุดุงููุฉ ูููุฏูุฑุฉ ุฑุฒุงู

**ุงููุณุงุฑ:** `/app/[locale]/dashboard/admin/page.tsx`

**ุงูููููุงุช:**

**ุฃ. ูุธุฑุฉ ุนุงูุฉ (Overview):**
- ุฅุฌูุงูู ุงููุณุชุฎุฏููู (ุฅุฏุงุฑูููุ ุจุงุฆุนููุ ูุดุชุฑูู)
- ุฅุฌูุงูู ุงูููุชุฌุงุช/ุงูุฎุฏูุงุช/ุงููุดุงุฑูุน
- ุฅุฌูุงูู ุงูุทูุจุงุช ูุงููุจูุนุงุช
- ุงูุฅูุฑุงุฏุงุช (ุนูููุฉ ุงูููุตุฉ)
- ุฅุญุตุงุฆูุงุช ููููุฉ/ุฃุณุจูุนูุฉ/ุดูุฑูุฉ

**ุจ. ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู:**
- ุนุฑุถ ุฌููุน ุงููุณุชุฎุฏููู
- ุชุนุฏูู/ุญุฐู/ุญุธุฑ ูุณุชุฎุฏููู
- ุชุบููุฑ ุงูุฃุฏูุงุฑ
- ุนุฑุถ ูุดุงุท ุงููุณุชุฎุฏููู

**ุฌ. ุฅุฏุงุฑุฉ ุงููุญุชูู:**
- ูุฑุงุฌุนุฉ ุงูููุชุฌุงุช ุงูุฌุฏูุฏุฉ (ูุจู ุงููุดุฑ)
- ูุฑุงุฌุนุฉ ุงูุฎุฏูุงุช ุงูุฌุฏูุฏุฉ
- ูุฑุงุฌุนุฉ ุงููุดุงุฑูุน
- ุงูููุงููุฉ/ุงูุฑูุถ

**ุฏ. ุฅุฏุงุฑุฉ ุงููุฒุงุนุงุช:**
- ุนุฑุถ ุฌููุน ุงููุฒุงุนุงุช
- ุญู ุงููุฒุงุนุงุช
- ุงุณุชุฑุฏุงุฏ ุงูุฃููุงู

**ูู. ุฅุฏุงุฑุฉ ุงููุฏููุนุงุช:**
- ุนุฑุถ ุฌููุน ุงููุนุงููุงุช
- ุฅุฏุงุฑุฉ ุงูุนูููุงุช
- ุณุญุจ ุงูุฃุฑุจุงุญ

**ู. ุงูุชูุงุฑูุฑ:**
- ุชูุฑูุฑ ุงููุจูุนุงุช
- ุชูุฑูุฑ ุงููุณุชุฎุฏููู
- ุชูุฑูุฑ ุงูุฅูุฑุงุฏุงุช
- ุชุตุฏูุฑ Excel/PDF

**ุงููููุงุช ุงููุทููุจุฉ:**
```
app/[locale]/dashboard/admin/
โโโ page.tsx (Overview)
โโโ users/page.tsx
โโโ products/page.tsx
โโโ services/page.tsx
โโโ jobs/page.tsx
โโโ orders/page.tsx
โโโ disputes/page.tsx
โโโ payments/page.tsx
โโโ reports/page.tsx
โโโ settings/page.tsx
```

---

#### 3. ููุญุฉ ุชุญูู ุงูุจุงุฆุน ุงูููุญุฏุฉ (Unified Seller Dashboard)

**ุงููุฏู:** ููุญุฉ ูุงุญุฏุฉ ูุฅุฏุงุฑุฉ ุงูุฃุณูุงู ุงูุซูุงุซุฉ

**ุงููุณุงุฑ:** `/app/[locale]/dashboard/seller/page.tsx`

**ุงูููููุงุช:**

**ุฃ. ูุธุฑุฉ ุนุงูุฉ:**
- ุฅุฌูุงูู ุงูููุชุฌุงุช/ุงูุฎุฏูุงุช/ุงููุดุงุฑูุน
- ุฅุฌูุงูู ุงููุจูุนุงุช
- ุงูุชููููุงุช
- ุงูุฑุณุงุฆู ุงูุฌุฏูุฏุฉ

**ุจ. ุฅุฏุงุฑุฉ ุงูููุชุฌุงุช ุงูุฌุงูุฒุฉ:**
- ุฅุถุงูุฉ ููุชุฌ ุฌุฏูุฏ
- ุชุนุฏูู/ุญุฐู ููุชุฌุงุช
- ุฅุญุตุงุฆูุงุช ุงููุจูุนุงุช
- ุงูุชุญูููุงุช

**ุฌ. ุฅุฏุงุฑุฉ ุงูุฎุฏูุงุช ุงููุฎุตุตุฉ:**
- ุฅุถุงูุฉ ุฎุฏูุฉ ุฌุฏูุฏุฉ
- ุฅุฏุงุฑุฉ ุงูุทูุจุงุช
- ุญุงูุฉ ุงูุทูุจุงุช (ููุฏ ุงูุชูููุฐุ ููุชูู)
- ุงูุชุณูููุงุช

**ุฏ. ุฅุฏุงุฑุฉ ูุดุงุฑูุน ุงูุนูู ุงูุญุฑ:**
- ุนุฑุถ ุงููุดุงุฑูุน ุงููุชุงุญุฉ
- ุชูุฏูู ุนุฑูุถ
- ุฅุฏุงุฑุฉ ุงููุดุงุฑูุน ุงูุฌุงุฑูุฉ
- ุชุณููู ุงููุดุงุฑูุน

**ูู. ุงููุญูุธุฉ:**
- ุงูุฃุฑุจุงุญ
- ุงููุณุญูุจุงุช
- ุงูุณุฌู ุงููุงูู

**ู. ุงูุฑุณุงุฆู:**
- ูุญุงุฏุซุงุช ูุน ุงููุดุชุฑูู
- ุฅุดุนุงุฑุงุช

**ุงููููุงุช ุงููุทููุจุฉ:**
```
app/[locale]/dashboard/seller/
โโโ page.tsx (Overview)
โโโ products/
โ   โโโ page.tsx (List)
โ   โโโ new/page.tsx (Add Product)
โ   โโโ [id]/edit/page.tsx (Edit)
โโโ services/
โ   โโโ page.tsx (List)
โ   โโโ new/page.tsx (Add Service)
โ   โโโ [id]/edit/page.tsx (Edit)
โโโ jobs/
โ   โโโ browse/page.tsx (Browse Jobs)
โ   โโโ proposals/page.tsx (My Proposals)
โ   โโโ active/page.tsx (Active Projects)
โโโ orders/page.tsx
โโโ wallet/page.tsx
โโโ messages/page.tsx
โโโ settings/page.tsx
```

---

#### 4. ููุญุฉ ุชุญูู ุงููุดุชุฑู (Buyer Dashboard)

**ุงููุฏู:** ููุญุฉ ูููุดุชุฑู ูุฅุฏุงุฑุฉ ูุดุชุฑูุงุชู ูุทูุจุงุชู

**ุงููุณุงุฑ:** `/app/[locale]/dashboard/buyer/page.tsx`

**ุงูููููุงุช:**

**ุฃ. ูุธุฑุฉ ุนุงูุฉ:**
- ุงููุดุชุฑูุงุช ุงูุฃุฎูุฑุฉ
- ุงูุทูุจุงุช ุงูุฌุงุฑูุฉ
- ุงูุชุญูููุงุช

**ุจ. ูุดุชุฑูุงุชู:**
- ุงูููุชุฌุงุช ุงููุดุชุฑุงุฉ
- ุงูุชุญูููุงุช
- ุงูููุงุชูุฑ

**ุฌ. ุทูุจุงุชู:**
- ุงูุฎุฏูุงุช ุงููุทููุจุฉ
- ุญุงูุฉ ุงูุทูุจ
- ุงูุชุณูููุงุช

**ุฏ. ูุดุงุฑูุนู:**
- ุงููุดุงุฑูุน ุงูููุดูุฑุฉ
- ุงูุนุฑูุถ ุงููุณุชููุฉ
- ุงููุดุงุฑูุน ุงูุฌุงุฑูุฉ
- ุงููุดุงุฑูุน ุงูููุชููุฉ

**ูู. ุงูููุถูุฉ:**
- ุงูููุชุฌุงุช ุงูููุถูุฉ
- ุงูุจุงุฆุนูู ุงูููุถููู

**ู. ุงูุฑุณุงุฆู:**
- ูุญุงุฏุซุงุช ูุน ุงูุจุงุฆุนูู

**ุงููููุงุช ุงููุทููุจุฉ:**
```
app/[locale]/dashboard/buyer/
โโโ page.tsx (Overview)
โโโ purchases/page.tsx
โโโ orders/page.tsx
โโโ projects/
โ   โโโ page.tsx (My Projects)
โ   โโโ new/page.tsx (Post Project)
โ   โโโ [id]/proposals/page.tsx (View Proposals)
โโโ favorites/page.tsx
โโโ messages/page.tsx
โโโ settings/page.tsx
```

---

### ุงููุฌููุนุฉ ุงูุซุงููุฉ: ุงูุฃูุธูุฉ ุงููุธูููุฉ ุงูุญูููุฉ

#### 5. ูุธุงู ุงูุจุญุซ ุงูุญูููู (Real Search System)

**ุงููุฏู:** ุจุญุซ ุดุงูู ููุนุงู ุนุจุฑ ุฌููุน ุงูุฃุณูุงู ุงูุซูุงุซุฉ

**ุงูููููุงุช:**

**ุฃ. Search API:**
```typescript
// app/api/search/route.ts
export async function GET(request: Request) {
  const { searchParams } = new URL(request.url)
  const query = searchParams.get('q')
  const market = searchParams.get('market') // products, services, jobs, all
  const category = searchParams.get('category')
  const minPrice = searchParams.get('minPrice')
  const maxPrice = searchParams.get('maxPrice')

  // Search in Products
  const products = await prisma.product.findMany({
    where: {
      OR: [
        { titleAr: { contains: query, mode: 'insensitive' } },
        { titleEn: { contains: query, mode: 'insensitive' } },
        { descriptionAr: { contains: query, mode: 'insensitive' } },
        { descriptionEn: { contains: query, mode: 'insensitive' } },
        { tags: { has: query } }
      ],
      category: category ? { equals: category } : undefined,
      price: {
        gte: minPrice ? parseFloat(minPrice) : undefined,
        lte: maxPrice ? parseFloat(maxPrice) : undefined
      },
      status: 'APPROVED'
    },
    include: {
      seller: {
        select: {
          username: true,
          avatar: true,
          rating: true
        }
      }
    },
    take: 20
  })

  // Search in Services
  // Search in Jobs

  return Response.json({
    products,
    services,
    jobs,
    total: products.length + services.length + jobs.length
  })
}
```

**ุจ. Search Component:**
```typescript
// components/search/SearchBar.tsx
'use client'

import { useState, useEffect } from 'react'
import { useRouter } from 'next/navigation'
import { Search } from 'lucide-react'

export function SearchBar() {
  const [query, setQuery] = useState('')
  const [results, setResults] = useState([])
  const [isLoading, setIsLoading] = useState(false)
  const router = useRouter()

  useEffect(() => {
    if (query.length < 2) {
      setResults([])
      return
    }

    const timer = setTimeout(async () => {
      setIsLoading(true)
      const res = await fetch(`/api/search?q=${encodeURIComponent(query)}`)
      const data = await res.json()
      setResults(data)
      setIsLoading(false)
    }, 300)

    return () => clearTimeout(timer)
  }, [query])

  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault()
    router.push(`/search?q=${encodeURIComponent(query)}`)
  }

  return (
    <form onSubmit={handleSubmit} className="relative">
      <input
        type="text"
        value={query}
        onChange={(e) => setQuery(e.target.value)}
        placeholder="ุงุจุญุซ ุนู ููุชุฌุงุชุ ุฎุฏูุงุชุ ุฃู ูุดุงุฑูุน..."
        className="w-full px-4 py-2 pr-10 rounded-lg border"
      />
      <Search className="absolute right-3 top-2.5 h-5 w-5 text-gray-400" />

      {/* Search Results Dropdown */}
      {results.length > 0 && (
        <div className="absolute top-full mt-2 w-full bg-white rounded-lg shadow-lg">
          {/* Display results */}
        </div>
      )}
    </form>
  )
}
```

**ุฌ. Search Results Page:**
```typescript
// app/[locale]/search/page.tsx
export default async function SearchPage({
  searchParams
}: {
  searchParams: { q: string }
}) {
  // Fetch and display search results
}
```

---

#### 6. ูุธุงู ุงูููุงุชุฑ ุงููุชูุฏูุฉ (Advanced Filters)

**ุงููุฏู:** ููุงุชุฑ ุดุงููุฉ ููู ุณูู

**ุงูููุงุชุฑ ุงููุทููุจุฉ:**

**ุฃ. ููููุชุฌุงุช ุงูุฌุงูุฒุฉ:**
- ุงููุฆุฉ ุงูุฑุฆูุณูุฉ (8 ูุฆุงุช)
- ุงูููุน ุงููุฑุนู (596+ ููุน)
- ุงูุณุนุฑ (ูู - ุฅูู)
- ููุน ุงูุชุฑุฎูุต (ุดุฎุตูุ ุชุฌุงุฑูุ ููุชุฏ)
- ุงูุชูููู (5 ูุฌููุ 4+ุ 3+)
- ุงูุจุงุฆุน
- ุงููุบุฉ
- ุชุงุฑูุฎ ุงููุดุฑ

**ุจ. ููุฎุฏูุงุช ุงููุฎุตุตุฉ:**
- ุงููุฆุฉ (8 ูุฆุงุช)
- ุงูููุน (234 ููุน)
- ุงูุณุนุฑ
- ููุช ุงูุชุณููู
- ุงูุชูููู
- ูุณุชูู ุงูุจุงุฆุน
- ุงููุบุฉ

**ุฌ. ููุดุงุฑูุน ุงูุนูู ุงูุญุฑ:**
- ุงูุชุฎุตุต (50+ ูุฆุฉ)
- ุญุฌู ุงููุดุฑูุน (ุตุบูุฑุ ูุชูุณุทุ ูุจูุฑุ ูุนูุฏ)
- ูุณุชูู ุงูุฎุจุฑุฉ (ูุจุชุฏุฆุ ูุชูุณุทุ ุฎุจูุฑ)
- ุงูููุฒุงููุฉ
- ุงููุฏุฉ
- ุญุงูุฉ ุงููุดุฑูุน (ููุชูุญุ ููุฏ ุงูุชูููุฐุ ููุชูู)

**ุงูููููุงุช:**
```typescript
// components/filters/ProductFilters.tsx
// components/filters/ServiceFilters.tsx
// components/filters/JobFilters.tsx
```

---

#### 7. ูุธุงู ุงูุชูุจููุงุช ุงูุญูููู (Real Notifications System)

**ุงููุฏู:** ุชูุจููุงุช ููุฑูุฉ ููุนุงูุฉ

**ุฃููุงุน ุงูุชูุจููุงุช:**
1. ุทูุจ ุฌุฏูุฏ
2. ุจูุน ุฌุฏูุฏ
3. ุฑุณุงูุฉ ุฌุฏูุฏุฉ
4. ุชูููู ุฌุฏูุฏ
5. ุฑุฏ ุนูู ุนุฑุถ
6. ูุจูู/ุฑูุถ ููุชุฌ/ุฎุฏูุฉ
7. ุชุญุฏูุซ ุญุงูุฉ ุทูุจ
8. ุณุญุจ ุฃุฑุจุงุญ
9. ูุฒุงุน ุฌุฏูุฏ

**ุงูููููุงุช:**

**ุฃ. Notification Model:**
```prisma
model Notification {
  id          String   @id @default(cuid())
  userId      String
  user        User     @relation(fields: [userId], references: [id])

  type        NotificationType
  titleAr     String
  titleEn     String
  messageAr   String
  messageEn   String
  link        String?

  isRead      Boolean  @default(false)
  createdAt   DateTime @default(now())

  @@index([userId])
}

enum NotificationType {
  NEW_ORDER
  NEW_SALE
  NEW_MESSAGE
  NEW_REVIEW
  PROPOSAL_RESPONSE
  CONTENT_APPROVED
  CONTENT_REJECTED
  ORDER_UPDATE
  WITHDRAWAL
  NEW_DISPUTE
}
```

**ุจ. Notification API:**
```typescript
// app/api/notifications/route.ts
export async function GET(request: Request) {
  const session = await getServerSession(authOptions)
  if (!session) return Response.json({ error: 'Unauthorized' }, { status: 401 })

  const notifications = await prisma.notification.findMany({
    where: { userId: session.user.id },
    orderBy: { createdAt: 'desc' },
    take: 50
  })

  return Response.json(notifications)
}
```

**ุฌ. Notification Component:**
```typescript
// components/notifications/NotificationBell.tsx
'use client'

import { Bell } from 'lucide-react'
import { useEffect, useState } from 'react'

export function NotificationBell() {
  const [notifications, setNotifications] = useState([])
  const [unreadCount, setUnreadCount] = useState(0)

  useEffect(() => {
    // Fetch notifications
    fetch('/api/notifications')
      .then(res => res.json())
      .then(data => {
        setNotifications(data)
        setUnreadCount(data.filter(n => !n.isRead).length)
      })

    // Poll every 30 seconds
    const interval = setInterval(() => {
      // Fetch new notifications
    }, 30000)

    return () => clearInterval(interval)
  }, [])

  return (
    <button className="relative">
      <Bell className="h-6 w-6" />
      {unreadCount > 0 && (
        <span className="absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center">
          {unreadCount}
        </span>
      )}
    </button>
  )
}
```

---

#### 8. ูุธุงู ุฑูุน ุงููููุงุช (File Upload System)

**ุงููุฏู:** ุฑูุน ูุฅุฏุงุฑุฉ ุฌููุน ุฃููุงุน ุงููููุงุช

**ุงููุชุทูุจุงุช:**
- ุฏุนู ุฌููุน ุงูุตูุบ (PDF, DOCX, ZIP, MP4, MP3, JPG, PNG, ุงูุฎ)
- ุฑูุน ูููุงุช ูุจูุฑุฉ (ุญุชู 5GB)
- ุงูุชุฎุฒูู ุงูุณุญุงุจู (AWS S3 ุฃู DigitalOcean Spaces)
- ูุนุงููุฉ ุงููููุงุช
- ุญูุงูุฉ ุงูุฑูุงุจุท (signed URLs)

**ุงูููููุงุช:**

**ุฃ. Upload API:**
```typescript
// app/api/upload/route.ts
import { S3Client, PutObjectCommand } from "@aws-sdk/client-s3"

const s3Client = new S3Client({
  region: process.env.AWS_REGION!,
  credentials: {
    accessKeyId: process.env.AWS_ACCESS_KEY_ID!,
    secretAccessKey: process.env.AWS_SECRET_ACCESS_KEY!
  }
})

export async function POST(request: Request) {
  const formData = await request.formData()
  const file = formData.get('file') as File

  if (!file) {
    return Response.json({ error: 'No file provided' }, { status: 400 })
  }

  // Validate file
  const maxSize = 5 * 1024 * 1024 * 1024 // 5GB
  if (file.size > maxSize) {
    return Response.json({ error: 'File too large' }, { status: 400 })
  }

  // Generate unique filename
  const filename = `${Date.now()}-${file.name}`
  const buffer = Buffer.from(await file.arrayBuffer())

  // Upload to S3
  const command = new PutObjectCommand({
    Bucket: process.env.AWS_S3_BUCKET!,
    Key: filename,
    Body: buffer,
    ContentType: file.type
  })

  await s3Client.send(command)

  const url = `https://${process.env.AWS_S3_BUCKET}.s3.${process.env.AWS_REGION}.amazonaws.com/${filename}`

  return Response.json({ url, filename })
}
```

**ุจ. Upload Component:**
```typescript
// components/upload/FileUpload.tsx
'use client'

import { useState } from 'react'
import { Upload, X } from 'lucide-react'

export function FileUpload({ onUpload }: { onUpload: (url: string) => void }) {
  const [uploading, setUploading] = useState(false)
  const [progress, setProgress] = useState(0)

  const handleUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {
    const file = e.target.files?.[0]
    if (!file) return

    setUploading(true)

    const formData = new FormData()
    formData.append('file', file)

    try {
      const res = await fetch('/api/upload', {
        method: 'POST',
        body: formData
      })

      const data = await res.json()
      onUpload(data.url)
    } catch (error) {
      console.error('Upload failed:', error)
    } finally {
      setUploading(false)
    }
  }

  return (
    <div className="border-2 border-dashed rounded-lg p-6">
      <input
        type="file"
        onChange={handleUpload}
        disabled={uploading}
        className="hidden"
        id="file-upload"
      />
      <label htmlFor="file-upload" className="cursor-pointer">
        <Upload className="mx-auto h-12 w-12 text-gray-400" />
        <p className="mt-2 text-sm text-gray-600">
          {uploading ? `ุฌุงุฑู ุงูุฑูุน... ${progress}%` : 'ุงุถุบุท ูุงุฎุชูุงุฑ ููู'}
        </p>
      </label>
    </div>
  )
}
```

---

#### 9. ุชูุงูู ุจูุงุจุงุช ุงูุฏูุน (Payment Gateway Integration)

**ุงููุฏู:** ุฏูุฌ ุจูุงุจุงุช ุงูุฏูุน ุงูุณุนูุฏูุฉ ูุงูุนุงูููุฉ

**ุงูุจูุงุจุงุช ุงููุทููุจุฉ:**
1. **Moyasar** (ุงูุฃุณุงุณูุฉ ููุณุนูุฏูุฉ)
2. **PayTabs** (ุงุญุชูุงุทูุฉ)
3. **PayPal** (ููุนููุงุก ุงูุฏููููู)

**ุฃ. Moyasar Integration:**
```typescript
// lib/moyasar.ts
export async function createPayment({
  amount,
  description,
  callbackUrl,
  metadata
}: {
  amount: number
  description: string
  callbackUrl: string
  metadata: any
}) {
  const response = await fetch('https://api.moyasar.com/v1/payments', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      'Authorization': `Basic ${Buffer.from(process.env.MOYASAR_SECRET_KEY + ':').toString('base64')}`
    },
    body: JSON.stringify({
      amount: Math.round(amount * 100), // Convert to halalas
      currency: 'SAR',
      description,
      callback_url: callbackUrl,
      metadata,
      source: {
        type: 'creditcard'
      }
    })
  })

  return response.json()
}
```

**ุจ. Payment Flow:**
1. ุงููุดุชุฑู ูุถุบุท "ุดุฑุงุก ุงูุขู"
2. ุฅูุดุงุก ุทูุจ (Order) ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
3. ุฅูุดุงุก ุฌูุณุฉ ุฏูุน ูุน Moyasar
4. ุชูุฌูู ุงููุดุชุฑู ูุตูุญุฉ ุงูุฏูุน
5. Callback ูู Moyasar ุจุนุฏ ุงูุฏูุน
6. ุชุญุฏูุซ ุญุงูุฉ ุงูุทูุจ
7. ุฅุฑุณุงู ุฅุดุนุงุฑุงุช ููุจุงุฆุน ูุงููุดุชุฑู
8. ุงูุณูุงุญ ุจุงูุชุญููู

**ุฌ. Payment Models:**
```prisma
model Order {
  id              String        @id @default(cuid())
  orderNumber     String        @unique

  buyerId         String
  buyer           User          @relation(fields: [buyerId], references: [id])

  sellerId        String
  seller          User          @relation(fields: [sellerId], references: [id], name: "SellerOrders")

  productId       String?
  product         Product?      @relation(fields: [productId], references: [id])

  serviceId       String?
  service         Service?      @relation(fields: [serviceId], references: [id])

  amount          Float
  platformFee     Float
  sellerAmount    Float

  status          OrderStatus   @default(PENDING)
  paymentStatus   PaymentStatus @default(PENDING)
  paymentMethod   String?
  paymentId       String?

  createdAt       DateTime      @default(now())
  paidAt          DateTime?
  completedAt     DateTime?

  @@index([buyerId])
  @@index([sellerId])
}

enum OrderStatus {
  PENDING
  PAID
  IN_PROGRESS
  COMPLETED
  CANCELLED
  REFUNDED
}

enum PaymentStatus {
  PENDING
  PAID
  FAILED
  REFUNDED
}
```

---

#### 10. ูุธุงู ุงูุชููููุงุช ูุงููุฑุงุฌุนุงุช (Reviews & Ratings System)

**ุงููุฏู:** ุชููููุงุช ููุซููุฉ ููุจุงุฆุนูู ูุงูููุชุฌุงุช

**ุงูููููุงุช:**

**ุฃ. Review Model:**
```prisma
model Review {
  id          String   @id @default(cuid())

  reviewerId  String
  reviewer    User     @relation(fields: [reviewerId], references: [id])

  productId   String?
  product     Product? @relation(fields: [productId], references: [id])

  serviceId   String?
  service     Service? @relation(fields: [serviceId], references: [id])

  sellerId    String
  seller      User     @relation(fields: [sellerId], references: [id], name: "SellerReviews")

  rating      Int      // 1-5 stars
  comment     String?

  isVerified  Boolean  @default(false) // Only buyers who purchased can review

  createdAt   DateTime @default(now())

  @@index([productId])
  @@index([serviceId])
  @@index([sellerId])
}
```

**ุจ. Rating Calculation:**
```typescript
// Update seller rating after new review
async function updateSellerRating(sellerId: string) {
  const reviews = await prisma.review.findMany({
    where: { sellerId, isVerified: true }
  })

  const averageRating = reviews.reduce((sum, r) => sum + r.rating, 0) / reviews.length

  await prisma.user.update({
    where: { id: sellerId },
    data: {
      rating: averageRating,
      totalReviews: reviews.length
    }
  })
}
```

---

#### 11. ูุธุงู ุงููุฑุงุณูุฉ (Messaging System)

**ุงููุฏู:** ูุญุงุฏุซุงุช ูุจุงุดุฑุฉ ุจูู ุงููุดุชุฑูู ูุงูุจุงุฆุนูู

**ุฃ. Message Model:**
```prisma
model Conversation {
  id          String    @id @default(cuid())

  user1Id     String
  user1       User      @relation(fields: [user1Id], references: [id], name: "User1Conversations")

  user2Id     String
  user2       User      @relation(fields: [user2Id], references: [id], name: "User2Conversations")

  messages    Message[]

  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt

  @@unique([user1Id, user2Id])
}

model Message {
  id              String       @id @default(cuid())

  conversationId  String
  conversation    Conversation @relation(fields: [conversationId], references: [id])

  senderId        String
  sender          User         @relation(fields: [senderId], references: [id])

  content         String
  attachments     String[]

  isRead          Boolean      @default(false)
  createdAt       DateTime     @default(now())

  @@index([conversationId])
  @@index([senderId])
}
```

**ุจ. Real-time Updates:**
- ุงุณุชุฎุฏุงู Pusher ุฃู Socket.io ููุชุญุฏูุซุงุช ุงูููุฑูุฉ
- ุฅุดุนุงุฑุงุช ููุฑุณุงุฆู ุงูุฌุฏูุฏุฉ

---

## ๐ ูููู ุงููุฌูุฏุงุช ุงููุทููุจ:

```
osdm-platform/
โโโ app/
โ   โโโ [locale]/
โ   โ   โโโ auth/
โ   โ   โ   โโโ login/page.tsx
โ   โ   โ   โโโ register/page.tsx
โ   โ   โ   โโโ forgot-password/page.tsx
โ   โ   โ   โโโ reset-password/page.tsx
โ   โ   โโโ dashboard/
โ   โ   โ   โโโ admin/
โ   โ   โ   โ   โโโ page.tsx
โ   โ   โ   โ   โโโ users/page.tsx
โ   โ   โ   โ   โโโ products/page.tsx
โ   โ   โ   โ   โโโ services/page.tsx
โ   โ   โ   โ   โโโ jobs/page.tsx
โ   โ   โ   โ   โโโ orders/page.tsx
โ   โ   โ   โ   โโโ disputes/page.tsx
โ   โ   โ   โ   โโโ payments/page.tsx
โ   โ   โ   โ   โโโ reports/page.tsx
โ   โ   โ   โโโ seller/
โ   โ   โ   โ   โโโ page.tsx
โ   โ   โ   โ   โโโ products/
โ   โ   โ   โ   โโโ services/
โ   โ   โ   โ   โโโ jobs/
โ   โ   โ   โ   โโโ orders/page.tsx
โ   โ   โ   โ   โโโ wallet/page.tsx
โ   โ   โ   โ   โโโ messages/page.tsx
โ   โ   โ   โโโ buyer/
โ   โ   โ       โโโ page.tsx
โ   โ   โ       โโโ purchases/page.tsx
โ   โ   โ       โโโ orders/page.tsx
โ   โ   โ       โโโ projects/
โ   โ   โ       โโโ messages/page.tsx
โ   โ   โโโ marketplace/
โ   โ   โ   โโโ ready-products/
โ   โ   โ   โโโ custom-services/
โ   โ   โ   โโโ freelance-jobs/
โ   โ   โโโ search/page.tsx
โ   โโโ api/
โ       โโโ auth/[...nextauth]/route.ts
โ       โโโ search/route.ts
โ       โโโ notifications/route.ts
โ       โโโ upload/route.ts
โ       โโโ payment/
โ       โ   โโโ create/route.ts
โ       โ   โโโ callback/route.ts
โ       โโโ messages/route.ts
โโโ components/
โ   โโโ auth/
โ   โ   โโโ LoginForm.tsx
โ   โ   โโโ RegisterForm.tsx
โ   โโโ search/
โ   โ   โโโ SearchBar.tsx
โ   โโโ filters/
โ   โ   โโโ ProductFilters.tsx
โ   โ   โโโ ServiceFilters.tsx
โ   โ   โโโ JobFilters.tsx
โ   โโโ notifications/
โ   โ   โโโ NotificationBell.tsx
โ   โโโ upload/
โ   โ   โโโ FileUpload.tsx
โ   โโโ messaging/
โ       โโโ ChatBox.tsx
โโโ lib/
โ   โโโ auth.ts
โ   โโโ prisma.ts
โ   โโโ moyasar.ts
โ   โโโ upload.ts
โโโ prisma/
    โโโ schema.prisma
    โโโ seed.ts
```

---

## ๐ฏ ุงูุฃููููุงุช:

### ุฃููููุฉ ูุตูู (ูุฌุจ ุงูุจุฏุก ุจูุง ุงูุขู):
1. โ ูุธุงู ุงููุตุงุฏูุฉ ุงููุงูู
2. โ ุญุณุงุจ ุงููุฏูุฑ (Razan@OSDM)
3. โ ููุญุฉ ุชุญูู ุงูุฅุฏุงุฑุฉ
4. โ ููุญุฉ ุชุญูู ุงูุจุงุฆุน
5. โ ููุญุฉ ุชุญูู ุงููุดุชุฑู

### ุฃููููุฉ ุนุงููุฉ:
6. โ ูุธุงู ุงูุจุญุซ ุงูุญูููู
7. โ ูุธุงู ุงูููุงุชุฑ ุงููุชูุฏูุฉ
8. โ ูุธุงู ุงูุชูุจููุงุช ุงูุญูููู

### ุฃููููุฉ ูุชูุณุทุฉ:
9. โ ูุธุงู ุฑูุน ุงููููุงุช
10. โ ุชูุงูู ุจูุงุจุงุช ุงูุฏูุน
11. โ ูุธุงู ุงูุชููููุงุช

### ุฃููููุฉ ุนุงุฏูุฉ:
12. โ ูุธุงู ุงููุฑุงุณูุฉ
13. โ ุชุทุจูู ุงููููุฉ ุงูุจุตุฑูุฉ

---

## ๐ ุฎุทุฉ ุงูุชูููุฐ ุงูุฒูููุฉ:

### ุงูุฃุณุจูุน ุงูุฃูู:
- ูุธุงู ุงููุตุงุฏูุฉ ุงููุงูู
- ุฅูุดุงุก ุญุณุงุจ ุงููุฏูุฑ
- ููุญุฉ ุชุญูู ุงูุฅุฏุงุฑุฉ ุงูุฃุณุงุณูุฉ

### ุงูุฃุณุจูุน ุงูุซุงูู:
- ููุญุฉ ุชุญูู ุงูุจุงุฆุน ุงูููุญุฏุฉ
- ููุญุฉ ุชุญูู ุงููุดุชุฑู
- ูุธุงู ุงูุจุญุซ ุงูุญูููู

### ุงูุฃุณุจูุน ุงูุซุงูุซ:
- ูุธุงู ุงูููุงุชุฑ ุงููุชูุฏูุฉ
- ูุธุงู ุงูุชูุจููุงุช ุงูุญูููู
- ูุธุงู ุฑูุน ุงููููุงุช

### ุงูุฃุณุจูุน ุงูุฑุงุจุน:
- ุชูุงูู ุจูุงุจุงุช ุงูุฏูุน
- ูุธุงู ุงูุชููููุงุช
- ูุธุงู ุงููุฑุงุณูุฉ

### ุงูุฃุณุจูุน ุงูุฎุงูุณ:
- ุชุทุจูู ุงููููุฉ ุงูุจุตุฑูุฉ ุงููุงููุฉ
- ุงูุงุฎุชุจุงุฑ ุงูุดุงูู
- ุฅุตูุงุญ ุงูุฃุฎุทุงุก

---

## ๐ ููุงุญุธุงุช ูููุฉ:

1. **ูู ูุธุงู ูุฌุจ ุฃู ูููู ุญูููู ููุนุงู** - ูุง mock data
2. **ุงูุชูุซูู ุงููุงูู** - ูู API ูุญุชุงุฌ ุชูุซูู
3. **ุงูุฃูุงู ุฃููุงู** - ูู endpoint ูุญุชุงุฌ authentication/authorization
4. **ุฏุนู ุงููุบุชูู** - ุงูุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ ูู ูู ููุงู
5. **Responsive Design** - ูุนูู ุนูู ุฌููุน ุงูุฃุฌูุฒุฉ

---

## โ ุงูุฎุทูุฉ ุงูุชุงููุฉ:

**ุงูุขู ูุง ุฑุฒุงูุ ุฃูุง ุฌุงูุฒ ููุจุฏุก ูู:**

1. ุจูุงุก ูุธุงู ุงููุตุงุฏูุฉ ุงููุงูู (Authentication System)
2. ุฅูุดุงุก ุญุณุงุจ ุงููุฏูุฑ (Razan@OSDM)
3. ุจูุงุก ููุญุฉ ุชุญูู ุงูุฅุฏุงุฑุฉ

**ูู ุชุฑูุฏููู ุฃู ุฃุจุฏุฃ ููุฑุงูุ** ๐

---

**ููุงุญุธุฉ:** ูุฐุง ุงูููู ุณูุชู ุชุญุฏูุซู ุจุงุณุชูุฑุงุฑ ูุน ุชูุฏู ุงูุนูู ูุชุชุจุน ุงูููุงู ุงูููุชููุฉ ูุงููุชุจููุฉ.
